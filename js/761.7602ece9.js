"use strict";(globalThis["webpackChunkweb_admin"]=globalThis["webpackChunkweb_admin"]||[]).push([[761],{5761:(a,e,l)=>{l.r(e),l.d(e,{default:()=>sa});var t=l(9835),s=l(1957),n=l(6970);const i=a=>((0,t.dD)("data-v-23d53ef0"),a=a(),(0,t.Cn)(),a),r={class:"col col-lg-12 col-md-6 col-sm-8 col-xs-10 q-pt-md"},o={class:"row q-mt-lg"},u={class:"row col-12 q-mt-md"},d=i((()=>(0,t._)("div",{class:"col-md-4 col-lg-4 col-xs-12"},[(0,t._)("div",{class:"q-table__title"},"Master Data Pengajuan Surat"),(0,t._)("p",{class:"text-caption"},"Data Pengajuan Surat yang di lakukan di dalam sistem")],-1))),p=i((()=>(0,t._)("span",{class:"rowNumber"},null,-1))),m={key:0},g={key:1,class:"text-red"},w={key:2,class:"text-orange"},c={key:0,class:"text-red"},f=i((()=>(0,t._)("div",null,"File Kosong",-1))),_=[f],k={key:1},b=i((()=>(0,t._)("div",{class:"text-h6"},"#Data Pembelian",-1))),h=i((()=>(0,t._)("span",{class:"rowNumber"},null,-1))),q={key:0},j={key:1},y={key:2},W={key:0},v=i((()=>(0,t._)("div",null,"File Kosong",-1))),D=[v],S={key:1},z=i((()=>(0,t._)("div",null,"File ",-1))),P=[z];function $(a,e,l,i,f,v){const z=(0,t.up)("q-breadcrumbs-el"),$=(0,t.up)("q-breadcrumbs"),Z=(0,t.up)("q-card"),Q=(0,t.up)("q-space"),C=(0,t.up)("q-btn"),x=(0,t.up)("q-input"),T=(0,t.up)("q-slide-transition"),U=(0,t.up)("q-td"),N=(0,t.up)("q-tr"),A=(0,t.up)("q-table"),F=(0,t.up)("q-card-section"),I=(0,t.up)("q-separator"),K=(0,t.up)("q-img"),V=(0,t.up)("q-avatar"),B=(0,t.up)("q-dialog"),L=(0,t.up)("q-item-section"),J=(0,t.up)("q-item"),M=(0,t.up)("q-card-actions"),O=(0,t.up)("q-page"),E=(0,t.Q2)("ripple"),G=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.j4)(O,{class:"q-pr-md q-pl-md q-pa-md"},{default:(0,t.w5)((()=>[(0,t._)("div",r,[(0,t.Wm)(Z,{class:"my-card q-pa-md",flat:"",bordered:""},{default:(0,t.w5)((()=>[(0,t.Wm)($,{separator:"---",class:"text-blue-10","active-color":"secondary"},{default:(0,t.w5)((()=>[(0,t.Wm)(z,{label:"Main Menu",icon:"widgets"}),(0,t.Wm)(z,{label:"Surat",icon:"extension"}),(0,t.Wm)(z,{label:"Pengajuan Surat",icon:"message"})])),_:1})])),_:1}),(0,t._)("div",o,[(0,t._)("div",u,[(0,t.Wm)(Z,{class:"my-card col",flat:"",bordered:""},{default:(0,t.w5)((()=>[(0,t.Wm)(F,{horizontal:""},{default:(0,t.w5)((()=>[(0,t.Wm)(F,{class:"col-12 q-pa-sm"},{default:(0,t.w5)((()=>[(0,t.Wm)(A,{"table-style":"counter-reset: cssRowCounter "+(f.pagination.page-1)*f.pagination.rowsPerPage+";",title:"Master Data Surat","aria-label":"Text",class:"text-h5",rows:f.rows,flat:"",columns:f.columns,"row-key":"name",filter:f.filter,pagination:f.pagination},{top:(0,t.w5)((()=>[d,(0,t.Wm)(Q),(0,t.Wm)(C,{flat:"",round:"",color:"primary",icon:"search",onClick:e[0]||(e[0]=a=>f.visibles=!f.visibles),size:"md",class:"q-mr-sm"}),(0,t.Wm)(T,null,{default:(0,t.w5)((()=>[(0,t.wy)((0,t._)("div",null,[(0,t.Wm)(x,{outlined:"",debounce:"300",placeholder:"Placeholder",style:{width:"300px"},color:"primary",modelValue:f.filter,"onUpdate:modelValue":e[1]||(e[1]=a=>f.filter=a),dense:""},null,8,["modelValue"])],512),[[s.F8,f.visibles]])])),_:1})])),body:(0,t.w5)((a=>[(0,t.Wm)(N,{props:a},{default:(0,t.w5)((()=>[(0,t.Wm)(U,{class:"text-center"},{default:(0,t.w5)((()=>[p])),_:1}),(0,t.Wm)(U,{key:"nik",props:a},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(a.row.nik),1)])),_:2},1032,["props"]),(0,t.Wm)(U,{key:"nama_lengkap",props:a},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(a.row.nama_lengkap),1)])),_:2},1032,["props"]),(0,t.Wm)(U,{key:"alamat_lengkap",props:a},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(a.row.alamat_lengkap),1)])),_:2},1032,["props"]),(0,t.Wm)(U,{key:"jenis_kelamin",props:a},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(a.row.jenis_kelamin),1)])),_:2},1032,["props"]),(0,t.Wm)(U,{key:"tempat_lahir",props:a},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(a.row.tempat_lahir),1)])),_:2},1032,["props"]),(0,t.Wm)(U,{key:"agama",props:a},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(a.row.agama),1)])),_:2},1032,["props"]),(0,t.Wm)(U,{key:"status_perkawinan",props:a},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(a.row.status_perkawinan),1)])),_:2},1032,["props"]),(0,t.Wm)(U,{key:"jenis_surat",props:a},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(a.row.jenis_surat),1)])),_:2},1032,["props"]),(0,t.Wm)(U,{key:"tanggal_pengajuan",props:a},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(a.row.tanggal_pengajuan),1)])),_:2},1032,["props"]),(0,t.Wm)(U,{key:"status_pengajuan",props:a,class:"text-green"},{default:(0,t.w5)((()=>["Diterima"==a.row.status_pengajuan?((0,t.wg)(),(0,t.iD)("div",m,(0,n.zw)(a.row.status_pengajuan),1)):(0,t.kq)("",!0),"Ditolak"==a.row.status_pengajuan?((0,t.wg)(),(0,t.iD)("div",g,(0,n.zw)(a.row.status_pengajuan),1)):(0,t.kq)("",!0),"Dalam Proses"==a.row.status_pengajuan?((0,t.wg)(),(0,t.iD)("div",w,(0,n.zw)(a.row.status_pengajuan),1)):(0,t.kq)("",!0)])),_:2},1032,["props"]),(0,t.Wm)(U,{key:"file",props:a},{default:(0,t.w5)((()=>[null==a.row.file?((0,t.wg)(),(0,t.iD)("div",c,_)):((0,t.wg)(),(0,t.iD)("div",k,[(0,t.Wm)(C,{label:"File",color:"green",outline:"",size:"sm",onClick:e=>v.downloadPDF(a.row._id),class:"q-ml-sm","no-caps":""},null,8,["onClick"])]))])),_:2},1032,["props"]),(0,t.Wm)(U,{key:"aksi",props:a},{default:(0,t.w5)((()=>[(0,t.Wm)(C,{label:"Aksi",color:"green",size:"sm",to:{name:"edit_pengajuan_surat",params:{id:a.row._id}},class:"q-ml-sm","no-caps":""},null,8,["to"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["table-style","rows","columns","filter","pagination"])])),_:1})])),_:1})])),_:1})]),(0,t.Wm)(B,{modelValue:f.detail.visible,"onUpdate:modelValue":e[2]||(e[2]=a=>f.detail.visible=a)},{default:(0,t.w5)((()=>[(0,t.Wm)(Z,null,{default:(0,t.w5)((()=>[(0,t.Wm)(F,null,{default:(0,t.w5)((()=>[b])),_:1}),(0,t.Wm)(I),(0,t.Wm)(F,{style:{"max-height":"50vh"},class:"scroll"},{default:(0,t.w5)((()=>[(0,t.Wm)(A,{rows:f.detail.rows,"row-key":"name",flat:"",columns:f.detail.columns,"hide-pagination":!0},{body:(0,t.w5)((e=>[(0,t.Wm)(N,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(U,{class:"text-center"},{default:(0,t.w5)((()=>[h])),_:1}),(0,t.Wm)(U,{key:"nik",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e.row.barang.nik),1)])),_:2},1032,["props"]),(0,t.Wm)(U,{key:"jenis_surat",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e.row.barang.jenis_surat),1)])),_:2},1032,["props"]),(0,t.Wm)(U,{key:"tanggal_pengajuan",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e.row.tanggal_pengajuan),1)])),_:2},1032,["props"]),(0,t.Wm)(U,{key:"status_pengajuan",props:e,class:"text-primary"},{default:(0,t.w5)((()=>["Diterima"==e.row.status_pengajuan?((0,t.wg)(),(0,t.iD)("div",q,(0,n.zw)(e.row.status_pengajuan),1)):(0,t.kq)("",!0),"Ditolak"==e.row.status_pengajuan?((0,t.wg)(),(0,t.iD)("div",j,(0,n.zw)(e.row.status_pengajuan),1)):(0,t.kq)("",!0),"Dalam Proses"==e.row.status_pengajuan?((0,t.wg)(),(0,t.iD)("div",y,(0,n.zw)(e.row.status_pengajuan),1)):(0,t.kq)("",!0)])),_:2},1032,["props"]),(0,t.Wm)(U,{key:"file",props:e},{default:(0,t.w5)((()=>[0==f.file.length?((0,t.wg)(),(0,t.iD)("div",W,D)):((0,t.wg)(),(0,t.iD)("div",S,P))])),_:2},1032,["props"]),(0,t.Wm)(U,{key:"gambar",props:e},{default:(0,t.w5)((()=>[(0,t.wy)(((0,t.wg)(),(0,t.j4)(J,{clickable:""},{default:(0,t.w5)((()=>[(0,t.Wm)(L,null,{default:(0,t.w5)((()=>[(0,t.Wm)(V,{rounded:"",size:"100px"},{default:(0,t.w5)((()=>[(0,t.Wm)(K,{src:`${a.$imgUrl}/gambar-barang/${e.row.barang.gambar}`,onClick:a=>v.tampil(e.row.barang.gambar)},null,8,["src","onClick"])])),_:2},1024),(0,t.Wm)(B,{ref:"dialog"},{default:(0,t.w5)((()=>[(0,t.Wm)(Z,{class:"my-card"},{default:(0,t.w5)((()=>[(0,t.Wm)(K,{src:`${a.$imgUrl}/gambar-barang/${f.fotoDiri}`,style:{width:"100%",height:"100%"}},null,8,["src"])])),_:1})])),_:1},512)])),_:2},1024)])),_:2},1024)),[[E]])])),_:2},1032,["props"]),(0,t.Wm)(U,{key:"subTotal",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e.row.subTotal),1)])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows","columns"])])),_:1}),(0,t.Wm)(I),(0,t.Wm)(M,{align:"right"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(C,{flat:"",label:"Ok",color:"primary"},null,512),[[G]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])])),_:1})}var Z=l(499);const Q={name:"PageIndex",data(){return{file:null,nama:null,url:null,visibles:!1,card:(0,Z.iH)(!1),pagination:{rowsPerPage:10},options:[],namaCustomer:[],fotoDiri:null,visibles:!1,filter:null,totalHutang:0,totalLunas:0,columns:[{name:"no",label:"No",field:"no"},{name:"nik",required:!0,label:"NIK",align:"left",field:"nik",sortable:!0},{name:"nama_lengkap",required:!0,label:"Nama Lengkap",align:"left",field:"nama_lengkap",sortable:!0},{name:"alamat_lengkap",required:!0,label:"Alamat",align:"left",field:"alamat_lengkap",sortable:!0},{name:"jenis_kelamin",required:!0,label:"Jenis Kelamin",align:"left",field:"jenis_kelamin",sortable:!0},{name:"tempat_lahir",required:!0,label:"Tempat Lahir",align:"left",field:"tempat_lahir",sortable:!0},{name:"agama",required:!0,label:"agama",align:"left",field:"agama",sortable:!0},{name:"status_perkawinan",required:!0,label:"Status Perkawinan",align:"left",field:"status_perkawinan",sortable:!0},{name:"jenis_surat",required:!0,label:"Jenis Surat",align:"left",field:"jenis_surat",sortable:!0},{name:"tanggal_pengajuan",required:!0,label:"Tanggal Pengajuan",align:"left",field:"tanggal_pengajuan",sortable:!0},{name:"status_pengajuan",required:!0,label:"Status Pengajuan",align:"left",field:"status_pengajuan",sortable:!0},{name:"file",required:!0,label:"File Surat",align:"left",field:"file",sortable:!0},{name:"aksi",label:"Aksi",field:"aksi",align:"center"}],rows:[],detail:{visible:!1,pelanggan:null,grandTotal:null,columns:[{name:"no",label:"No",field:"no"},{name:"nik",required:!0,label:"NIK",align:"left",field:"nik",sortable:!0},{name:"nama_lengkap",required:!0,label:"Nama Lengkap",align:"left",field:"nama_lengkap",sortable:!0},{name:"alamat_lengkap",required:!0,label:"Alamat",align:"left",field:"alamat_lengkap",sortable:!0},{name:"jenis_kelamin",required:!0,label:"Jenis Kelamin",align:"left",field:"jenis_kelamin",sortable:!0},{name:"tempat_lahir",required:!0,label:"Tempat Lahir",align:"left",field:"tempat_lahir",sortable:!0},{name:"agama",required:!0,label:"agama",align:"left",field:"agama",sortable:!0},{name:"status_perkawinan",required:!0,label:"Status Perkawinan",align:"left",field:"status_perkawinan",sortable:!0},{name:"jenis_surat",required:!0,label:"Jenis Surat",align:"left",field:"jenis_surat",sortable:!0},{name:"tanggal_pengajuan",required:!0,label:"Tanggal Pengajuan",align:"left",field:"tanggal_pengajuan",sortable:!0},{name:"status_pengajuan",required:!0,label:"Status Pengajuan",align:"left",field:"status_pengajuan",sortable:!0},{name:"file",required:!0,label:"File Surat",align:"left",field:"file",sortable:!0},{name:"aksi",label:"Aksi",field:"aksi",align:"center"}],rows:[]}}},created(){this.getCustomer()},methods:{downloadPDF(a){try{this.$api.get("pengajuan_surat/get-id/"+a).then((a=>{if(!0!==a.data.status)this.$showNotif(a.data.message,"negative");else{console.log(a.data.data);const e=a.data.data;this.file=e.file,this.url="http://localhost:4000/gambar-barang/"+this.file,console.log(this.url);this.downloadFile(this.url,e.jenis_surat)}}))}catch(e){console.log(e.message),this.$showNotif("Terjadi ke !","negative")}},downloadFile(a,e){const l=document.createElement("a");l.href=a,l.setAttribute("download",e),document.body.appendChild(l),l.click(),document.body.removeChild(l)},getCustomer(){try{this.$api.get("pengajuan_surat/get-all-barang").then((a=>{if(!0!==a.data.status)this.$showNotif(a.data.message,"negative");else{const e=a.data.data;this.rows=e,e.reverse(),console.log(this.rows)}}))}catch(a){this.$showNotif("Terjadi kesalahan !","negative")}},tampil(a){this.$refs.dialog.show(this.fotoDiri=a)},accept(a){this.$q.dialog({title:"Peringatan",message:"Apakah Anda Setuju untuk menerima transaksi?",color:"green",cancel:!0,persistent:!0}).onOk((()=>{try{this.$api.put("/transaksi/updateWeb/"+a,{status:"Selesai"}).then((a=>{!0!==a.data.status?this.$q.notify({message:"Status Gagal",color:"red"}):(this.$q.notify({message:"Status Berhasil ",color:"green"}),this.getCustomer())}))}catch(e){console.log(e),this.$showNotif("Terjadi kesalahan !","negative")}}))},reject(a){this.$q.dialog({title:"Peringatan",message:"Apakah Anda Setuju untuk menolak transaksi?",color:"red",cancel:!0,persistent:!0}).onOk((()=>{try{this.$api.put("/transaksi/updateWeb/"+a,{status:"Ditolak"}).then((a=>{!0!==a.data.status?this.$q.notify({message:"Status Gagal",color:"red"}):(this.$q.notify({message:"Status Berhasil ",color:"green"}),this.getCustomer())}))}catch(e){console.log(e),this.$showNotif("Terjadi kesalahan !","negative")}}))},showDetail(a){const e=a.map((a=>({barang:a.barang,subTotal:a.subtotal})));this.detail.visible=!0,this.detail.rows=e,console.log(e)}}};var C=l(1639),x=l(9885),T=l(4458),U=l(2605),N=l(8052),A=l(3190),F=l(7580),I=l(136),K=l(8879),V=l(9003),B=l(3119),L=l(1233),J=l(7220),M=l(2074),O=l(926),E=l(490),G=l(6749),H=l(1357),R=l(335),X=l(1821),Y=l(1136),aa=l(2146),ea=l(9984),la=l.n(ea);const ta=(0,C.Z)(Q,[["render",$],["__scopeId","data-v-23d53ef0"]]),sa=ta;la()(Q,"components",{QPage:x.Z,QCard:T.Z,QBreadcrumbs:U.Z,QBreadcrumbsEl:N.Z,QCardSection:A.Z,QTable:F.Z,QSpace:I.Z,QBtn:K.Z,QSlideTransition:V.Z,QInput:B.Z,QTr:L.Z,QTd:J.Z,QDialog:M.Z,QSeparator:O.Z,QItem:E.Z,QItemSection:G.Z,QAvatar:H.Z,QImg:R.Z,QCardActions:X.Z}),la()(Q,"directives",{Ripple:Y.Z,ClosePopup:aa.Z})}}]);